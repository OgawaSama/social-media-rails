<div id="<%= dom_id group %>" class="bg-white shadow-md rounded-lg overflow-hidden mb-8">

  <!-- Banner do grupo -->
  <% if group.header.attached? %>
    <div class="w-full overflow-hidden" style="height:128px;">
      <%= image_tag(group.header, class: "w-full h-full object-cover") %>
    </div>
  <% end %>

  <div class="p-6">

    <!-- Avatar e Nome do grupo -->
    <div class="flex items-center mb-6">
      <% if group.avatar.attached? %>
        <div class="w-32 h-32 rounded-full overflow-hidden border-2 border-gray-300 flex-shrink-0">
          <%= image_tag(group.avatar, class: "w-full h-full object-cover") %>
        </div>
      <% end %>
      <h1 class="text-5xl font-bold ml-16">
        <%= group.name %>
      </h1>
    </div>

    <!-- Bio -->
    <p class="mb-4"><strong>Bio:</strong> <%= group.bio %></p>

    <!-- Formulário para adicionar membro -->
    <div class="mb-6 flex gap-2">
      <%= form_with url: add_member_path(id: @group.id), method: :post, class: "flex-1 flex gap-2" do |f| %>
        <%= f.text_field :participant, placeholder: "New member's username", class: "flex-1 border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
        <%= f.submit "Add", class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded shadow transition duration-200" %>
      <% end %>
    </div>

    <!-- Lista de participantes com botão de remover -->
    <div class="mb-6">
      <h2 class="text-xl font-semibold mb-2">Participants</h2>
      <ul class="space-y-2">
        <% @group.participants.each do |participant| %>
          <li class="flex justify-between items-center border rounded p-2">
            <% if participant.profile %>
              <%= link_to participant.username, profile_path(participant.profile), class: "text-blue-600 hover:underline" %>
            <% else %>
              <span class="text-gray-500"><%= participant.username %> (No profile set yet)</span>
            <% end %>

            <%= form_with url: remove_member_path(id: @group.id, participant: participant.username), method: :post, data: { turbo_confirm: "Tem certeza que deseja remover #{participant.username} do grupo?" }, class: "inline-block ml-2" do %>
              <%= button_tag "Remove", type: "submit", class: "bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded shadow transition duration-200" %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

  </div>
</div>
